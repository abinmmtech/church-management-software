<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Family</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f6f9;
            color: #333;
        }
        .container {
            width: 80%;
            margin: 0 auto;
            padding-top: 30px;
        }
        .tabs {
            display: flex;
            justify-content: space-around;
            background-color: #007BFF;
            border-radius: 5px 5px 0 0;
        }
        .tabs div {
            padding: 15px 25px;
            color: white;
            cursor: pointer;
            border-radius: 5px 5px 0 0;
            transition: background-color 0.3s;
        }
        .tabs div:hover {
            background-color: #0056b3;
        }
        .tab-content {
            display: none;
            padding: 20px;
            background-color: white;
            border: 1px solid #ddd;
            border-top: none;
        }
        .active-tab {
            background-color: #0056b3;
        }
        .active-content {
            display: block;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
        }
        input, select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .row {
            display: flex;
            justify-content: space-between;
        }
        .left, .right {
            width: 48%;
        }
        .left input, .right input {
            width: 95%;
        }
        .btn {
            background-color: #007BFF;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
        .btn:hover {
            background-color: #0056b3;
        }
        .message {
            text-align: center;
            margin-top: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        table, th, td {
            border: 1px solid #ddd;
        }
        th, td {
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f4f6f9;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>Add Family</h2>
    <div class="tabs">
        <div id="tab1" class="tab active-tab" onclick="changeTab(1)">Head of Family</div>
        <div id="tab2" class="tab" onclick="changeTab(2)">Family Members</div>
        <div id="tab3" class="tab" onclick="changeTab(3)">Entered Data</div>
    </div>

    <div id="content1" class="tab-content active-content">
        <!-- Head of Family Form -->
        <h3>Head of Family (HOD) Details</h3>
        <div class="row">
            <div class="left">
                <div class="form-group">
                    <label for="h_id">Church/Register Serial Number (CID):</label>
                    <input type="text" id="h_id" placeholder="Enter CID">
                </div>
                <div class="form-group">
                    <label for="h_a_id">Association Member ID (AID):</label>
                    <input type="text" id="h_a_id" placeholder="Enter Association ID">
                </div>
                <div class="form-group">
                    <label for="h_name">Name:</label>
                    <input type="text" id="h_name" placeholder="Enter Name">
                </div>
                <!-- Add other left fields for HOD here -->
            </div>
            <div class="right">
                <div class="form-group">
                    <label for="h_address">Address:</label>
                    <input type="text" id="h_address" placeholder="Enter Address">
                </div>
                <div class="form-group">
                    <label for="h_pincode">Pincode:</label>
                    <input type="text" id="h_pincode" placeholder="Enter Pincode">
                </div>
                <div class="form-group">
                    <label for="h_dob">Date of Birth:</label>
                    <input type="date" id="h_dob">
                </div>
                <!-- Add other right fields for HOD here -->
            </div>
        </div>
        <button class="btn" onclick="saveHeadOfFamily()">Save Head of Family</button>
    </div>

    <div id="content2" class="tab-content">
        <!-- Family Members Form -->
        <h3>Family Members Details</h3>
        <div class="row">
            <div class="left">
                <div class="form-group">
                    <label for="m_name">Member Name:</label>
                    <input type="text" id="m_name" placeholder="Enter Member Name">
                </div>
                <!-- Add other left fields for members here -->
            </div>
            <div class="right">
                <div class="form-group">
                    <label for="m_address">Address:</label>
                    <input type="text" id="m_address" placeholder="Enter Address">
                </div>
                <div class="form-group">
                    <label for="m_dob">Date of Birth:</label>
                    <input type="date" id="m_dob">
                </div>
                <!-- Add other right fields for members here -->
            </div>
        </div>
        <button class="btn" onclick="saveFamilyMember()">Save Family Member</button>
    </div>

    <div id="content3" class="tab-content">
        <!-- Display Entered Data -->
        <h3>Entered Data</h3>
        <table id="familyData">
            <thead>
                <tr>
                    <th>HOD Name</th>
                    <th>Member Name</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <!-- Data will be added here dynamically -->
            </tbody>
        </table>
        <button class="btn" onclick="submitFamily()">Submit Family</button>
    </div>
</div>

<script>
    let hodData = {};
    let familyMembers = [];

    function changeTab(tabNumber) {
        // Hide all tab contents
        const contents = document.querySelectorAll('.tab-content');
        contents.forEach(content => content.classList.remove('active-content'));

        // Remove active tab class
        const tabs = document.querySelectorAll('.tab');
        tabs.forEach(tab => tab.classList.remove('active-tab'));

        // Show selected tab content
        document.getElementById(`content${tabNumber}`).classList.add('active-content');
        document.getElementById(`tab${tabNumber}`).classList.add('active-tab');
    }

    function saveHeadOfFamily() {
        hodData = {
            h_id: document.getElementById('h_id').value,
            h_a_id: document.getElementById('h_a_id').value,
            h_name: document.getElementById('h_name').value,
            h_address: document.getElementById('h_address').value,
            h_pincode: document.getElementById('h_pincode').value,
            h_dob: document.getElementById('h_dob').value,
        };
        // Add other fields as needed

        // Add data to the entered data table
        const tbody = document.getElementById('familyData').querySelector('tbody');
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${hodData.h_name}</td>
            <td></td> <!-- Empty for now, we'll fill in later -->
            <td><button onclick="editData()">Edit</button></td>
        `;
        tbody.appendChild(row);

        const promptResponse = confirm("Do you want to add family members?");
        if (promptResponse) {
            changeTab(2); // Move to the family members tab
        }
    }

    function saveFamilyMember() {
        const member = {
            m_name: document.getElementById('m_name').value,
            m_address: document.getElementById('m_address').value,
            m_dob: document.getElementById('m_dob').value,
        };
        // Add other fields as needed

        familyMembers.push(member);

        // Update the family member data in the table for the HOD
        const tbody = document.getElementById('familyData').querySelector('tbody');
        const rows = tbody.querySelectorAll('tr');
        const lastRow = rows[rows.length - 1]; // Get the last row (HOD row)
        const memberNames = familyMembers.map(fm => fm.m_name).join(', ');
        lastRow.cells[1].textContent = memberNames;

        const promptResponse = confirm("Do you want to add more family members?");
        if (promptResponse) {
            // Clear non-common fields for the next member
            document.getElementById('m_name').value = '';
            document.getElementById('m_address').value = '';
            document.getElementById('m_dob').value = '';
        } else {
            changeTab(3); // Move to the entered data tab
        }
    }

    function submitFamily() {
        // Submit data to the backend for saving
        alert('Family submitted successfully!');
    }

    function editData() {
        // Implement edit functionality if needed
    }
</script>

</body>
</html>
